---
layout: default
additional_css: homepage
searchExamples:
  - quotient familial
  - revenu fiscal de référence
  - cadastre

---

<section id="mission-statement" class="ui vertical center aligned segment">

  <div class="ui text container">
    <h1 class="ui inverted header">
      {{ site.description }}
    </h1>
    <div class="ui search">
		  <div class="ui fluid left icon input">
		    <input class="prompt"
              placeholder="{{ page.searchExamples | join: ', '}}…"
              type="search">
		    <i class="search icon"></i>
		  </div>
		</div>
  </div>
</section>

<section id="description" class="ui container">
  <div class="ui fluid centered stackable grid">
    <div class="five wide column">
      <img src="{{ site.baseurl }}/img/Apigouv_visual.svg" alt="image of usage of the API" />
    </div>
    <div class="five wide column">
      <h2>Pourquoi api.gouv ?</h2>
      <p>
        Vous êtes une administration, une collectivité, un éditeur de solutions pour les particuliers ou les entreprises et souhaitez simplifier radicalement la relation des usagers à l’administration.
      </p>
      <p>
        Les API proposées vous permettent de&nbsp;:
      </p>
      <ul>
        <li>simplifier les démarches d'un usager</li>
        <li>guider l'usager dans la saisie d'informations</li>
        <li>récupérer des informations que l'administration possède déjà</li>
        <li>…à vous d'inventer la suite !</li>
      </ul>
      <ul class="link">
        <li>
          <a href="{{ site.baseurl }}/api/">Explorez les {{ site.api | size }} API déjà disponibles</a>
        </li>
      </ul>
    </div>
  </div>
</section>

<section id="type" class="ui container">
  <ul class="ui fluid stackable grid">
    {% for type in site.api_type %}
    <li class="eight wide column">
      <i class="icon huge {{ type.logo }} {{ type.id }}"></i>
      <h2 class="header">{{ type.name }}</h2>
      <p>
        {{ type.description }}
      </p>
      {% assign api_type_size = site.api | where:"type", type.id |size %}

      <p class="discoverAPI">
        <a href="{{ site.baseurl }}/api/{{ type.id }}">
          {% if api_type_size == 0 %}
            Aucune API n'est encore disponible
          {% elsif api_type_size == 1 %}
            Explorer la première API
          {% else %}
            Explorer ces {{ api_type_size }} API
          {% endif %}
        </a>
      </p>
    </li>
    {% endfor %}
  </ul>
</section>



<section id="services" class="ui container">
  <h2 class="ui divider horizontal">Toutes les réutilisations</h2>
  <div class="ui two stackable cards">
    {% for service in site.reutilisation %}
      {% if service.featured %}
        {% include reuse-card.html reuse=service %}
      {% endif %}
  	{% endfor %}
  </div>
</section>

<div class="ui container">
  <p class="buttonContainer">
	   <a class="ui big button moreButton" href="{{ site.baseurl }}/reutilisations">Découvrez les {{ site.reutilisation | size }} réutilisations&nbsp;&nbsp;➤</a>
  </p>
</div>

<script>
$(document).ready(function() {
  var $searchDiv = $('.ui.search');
  function indexCollection(item, name) {
    item[name] = item[name].join('').replace(" ", "");
  }
  $.get("{{ site.baseurl }}/api.json", function( data ) {
    $.each(data, function(index, item) {
      indexCollection(item, 'keywords');
      indexCollection(item, 'clients');
      indexCollection(item, 'partners');
    });
    var action = {
      url: '{{ site.baseurl }}/api/',
      text: "Explorez les {{ site.api | size }} API déjà disponibles"
    }
    $searchDiv.search({
      minCharacters : 2,
      searchFields   : [
        'title',
        'description',
        'keywords',
        'owner',
        'clients',
        'partners',
        'contract'
      ],
      searchFullText: true,
      source: data,
      templates: {
        message: function(type, message) {
          html = '<p class="searchError">Aucune API ne correspond à votre recherche</p>'
          + '<a href="' + action.url + '" class="action">'
          +   action.text
          + '</a>';
          return html;
        },
        standard: function(response, fields) {
          var
            html = ''
          ;
          if(response[fields.results] !== undefined) {

            // each result
            $.each(response[fields.results], function(index, result) {
              if(result[fields.url]) {
                html  += '<a class="result" href="' + result[fields.url] + '">';
              }
              else {
                html  += '<a class="result">';
              }
              if(result[fields.image] !== undefined) {
                html += ''
                  + '<div class="image">'
                  + ' <img src="' + result[fields.image] + '">'
                  + '</div>'
                ;
              }
              html += '<div class="content">';
              if(result[fields.price] !== undefined) {
                html += '<div class="price">' + result[fields.price] + '</div>';
              }
              if(result[fields.title] !== undefined) {
                html += '<div class="title">' + result[fields.title] + '</div>';
              }
              if(result[fields.description] !== undefined) {
                html += '<div class="description">' + result[fields.description] + '</div>';
              }
              html  += ''
                + '</div>'
              ;
              html += '</a>';
            });
            if(action) {
              html += ''
              + '<a href="' + action.url + '" class="action">'
              +   action.text
              + '</a>';
            }
            return html;
          }
        }
      }
    });
    $searchDiv.keyup(function(e) {
      if(e.keyCode == 13) {
        var $link = $searchDiv.find('.results.visible a.result.active');
         window.location.href = $link.attr('href');
      }
    })
  });
});

</script>
