{"version":3,"file":"navigation.nomodule.js","sources":["../../src/core/generated/scripts/config.js","../../src/core/api.js","../../src/navigation/scripts/navigation/constants.js","../../src/navigation/scripts/navigation/navigation.js","../../src/navigation/index.js","../../src/navigation/scripts/module.js"],"sourcesContent":["export const prefix = 'fr';\r\nexport const namespace = 'dsfr';\r\nexport const organisation = '@gouvfr';\r\n","import { namespace } from './generated/scripts/config.js';\n\nconst api = window[namespace] || { core: {} };\nwindow[namespace] = api;\nexport default api;\n","import api from '../../api.js';\n\nexport const NAVIGATION_CLASS = api.core.ns('nav');\nexport const NAVIGATION_LIST_CLASS = api.core.ns('nav__list');\nexport const NAVIGATION_ITEM_CLASS = api.core.ns('nav__item');\nexport const NAVIGATION_ITEM_RIGHT_CLASS = api.core.ns('nav__item--align-right');\nexport const NAVIGATION_MENU_CLASS = api.core.ns('menu');\n","import api from '../../api.js';\nimport {\n  NAVIGATION_CLASS,\n  NAVIGATION_ITEM_CLASS,\n  NAVIGATION_LIST_CLASS,\n  NAVIGATION_MENU_CLASS,\n  NAVIGATION_ITEM_RIGHT_CLASS\n} from './constants';\n\nclass Navigation extends api.core.DisclosuresGroup {\n  constructor (id, element) {\n    super(id, element);\n\n    this.menus = [];\n\n    this.navList = element.querySelector(`.${NAVIGATION_LIST_CLASS}`);\n\n    document.addEventListener('focusout', this.focusOut.bind(this));\n    window.addEventListener('resize', this.resize.bind(this));\n    window.addEventListener('orientationchange', this.resize.bind(this));\n    this.resize();\n  }\n\n  static get selector () { return NAVIGATION_CLASS; }\n\n  add (member) {\n    super.add(member);\n\n    if (member.element.classList.contains(NAVIGATION_MENU_CLASS)) {\n      this.menus.push(new NavigationMenu(member, this.navList.getBoundingClientRect().right));\n    }\n  }\n\n  focusOut (e) {\n    requestAnimationFrame(() => {\n      if (this.current !== null && !this.current.hasFocus) this.index = -1;\n    });\n  }\n\n  get index () { return super.index; }\n\n  set index (value) {\n    if (value === -1 && this.current !== null && this.current.hasFocus) this.current.focus();\n    super.index = value;\n  }\n\n  resize () {\n    const right = this.navList.getBoundingClientRect().right;\n\n    for (const menu of this.menus) menu.place(right);\n  }\n}\n\nclass NavigationMenu {\n  constructor (collapse, right) {\n    this.initialize(collapse);\n    this.place(right);\n  }\n\n  initialize (collapse) {\n    this.element = collapse.element;\n\n    for (const button of collapse.buttons) {\n      if (!button.hasAttribute) continue;\n      this.button = button.element;\n      break;\n    }\n\n    let item = this.element.parentElement;\n    while (item) {\n      if (item.classList.contains(NAVIGATION_ITEM_CLASS)) {\n        this.item = item;\n        break;\n      }\n      item = item.parentElement;\n    }\n  }\n\n  place (right) {\n    const styles = getComputedStyle(this.element);\n    const width = parseFloat(styles.width);\n    const left = this.button.getBoundingClientRect().left;\n\n    if (left + width > right) api.core.addClass(this.item, NAVIGATION_ITEM_RIGHT_CLASS);\n    else api.core.removeClass(this.item, NAVIGATION_ITEM_RIGHT_CLASS);\n  }\n}\n\nexport { Navigation };\n","import api from './api.js';\nimport { Navigation } from './scripts/navigation/navigation';\n\napi.Navigation = Navigation;\n","import api from '../api.js';\nimport { NAVIGATION_CLASS } from './navigation/constants.js';\nimport { Navigation } from './navigation/navigation.js';\n\napi.Collapse.register(NAVIGATION_CLASS, Navigation);\n"],"names":["const","super","this","let"],"mappings":"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"}