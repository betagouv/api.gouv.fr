{"version":3,"file":"breadcrumb.nomodule.min.js","sources":["../../src/core/generated/scripts/config.js","../../src/core/api.js","../../src/breadcrumb/scripts/breadcrumb/constants.js","../../src/breadcrumb/scripts/breadcrumb/breadcrumb.js","../../src/breadcrumb/scripts/module.js","../../src/breadcrumb/scripts/breadcrumb/build.js"],"sourcesContent":["export const prefix = 'fr';\r\nexport const namespace = 'dsfr';\r\nexport const organisation = '@gouvfr';\r\n","import { namespace } from './generated/scripts/config.js';\n\nconst api = window[namespace] || { core: {} };\nwindow[namespace] = api;\nexport default api;\n","import api from '../../api.js';\n\nexport const BREADCRUMB_COLLAPSE_SELECTOR = `${api.core.ns.selector('breadcrumb')} ${api.core.ns.selector('collapse')}`;\n","import api from '../../api.js';\n\nclass Breadcrumb extends api.core.Instance {\n  constructor (element) {\n    super(element);\n    this.collapse = api.core.Instance.getInstances(element, api.Collapse)[0];\n    this.links = [...this.element.querySelectorAll('a[href]')];\n    this.count = 0;\n    if (this.links.length) {\n      this.listen(api.core.Disclosure.DISCLOSE_EVENT, this.focus.bind(this));\n      // TODO: refactor avec instance\n      this.resizing = this.resize.bind(this);\n      window.addEventListener('resize', this.resizing);\n    }\n  }\n\n  focus () {\n    this.links[0].focus();\n    api.core.engine.renderer.next(() => { this.verify(); });\n  }\n\n  verify () {\n    this.count++;\n    if (this.count > 100) return;\n    if (document.activeElement !== this.links[0]) this.focus();\n  }\n\n  resize () {\n    if (window.matchMedia('(min-width: 48em)').matches) {\n      if (this.collapse.buttons[0] === document.activeElement) this.links.focus();\n    } else {\n      if (this.links.indexOf(document.activeElement) > -1) this.collapse.focus();\n    }\n  }\n}\n\nexport { Breadcrumb };\n","/* eslint-disable no-new */\nimport api from '../api.js';\nimport build from './breadcrumb/build.js';\nimport { BREADCRUMB_COLLAPSE_SELECTOR } from './breadcrumb/constants';\n\nnew api.core.Initializer(BREADCRUMB_COLLAPSE_SELECTOR, [build]);\n","import { BREADCRUMB_COLLAPSE_SELECTOR } from './constants';\nimport { Breadcrumb } from './breadcrumb';\n\nconst build = () => {\n  const breadcrumbs = [];\n  const breadcrumbNodes = document.querySelectorAll(BREADCRUMB_COLLAPSE_SELECTOR);\n  for (let i = 0; i < breadcrumbNodes.length; i++) breadcrumbs.push(new Breadcrumb(breadcrumbNodes[i]));\n};\n\nexport default build;\n"],"names":["const","api","window","core","BREADCRUMB_COLLAPSE_SELECTOR","ns","selector","Breadcrumb","element","super","this","collapse","Instance","getInstances","Collapse","links","querySelectorAll","count","length","listen","Disclosure","DISCLOSE_EVENT","focus","bind","resizing","resize","addEventListener","engine","renderer","next","verify","document","activeElement","matchMedia","matches","buttons","indexOf","Initializer","breadcrumbs","breadcrumbNodes","i","push"],"mappings":";yBACOA,ICCDC,EAAMC,OAAgB,MAAK,CAAEC,KAAM,IACzCD,OAAgB,KAAID,ECDbD,IAAMI,EAAkCH,EAAIE,KAAKE,GAAGC,SAAS,kBAAiBL,EAAIE,KAAKE,GAAGC,SAAS,YCApGC,cACJ,WAAaC,GACXC,YAAMD,GACNE,KAAKC,SAAWV,EAAIE,KAAKS,SAASC,aAAaL,EAASP,EAAIa,UAAU,GACtEJ,KAAKK,MAAQ,UAAIL,KAAKF,QAAQQ,iBAAiB,YAC/CN,KAAKO,MAAQ,EACTP,KAAKK,MAAMG,SACbR,KAAKS,OAAOlB,EAAIE,KAAKiB,WAAWC,eAAgBX,KAAKY,MAAMC,KAAKb,OAEhEA,KAAKc,SAAWd,KAAKe,OAAOF,KAAKb,MACjCR,OAAOwB,iBAAiB,SAAUhB,KAAKc,qHAI3CF,4BACEZ,KAAKK,MAAM,GAAGO,QACdrB,EAAIE,KAAKwB,OAAOC,SAASC,iBAAanB,EAAKoB,yBAG7CA,kBACEpB,KAAKO,QACDP,KAAKO,MAAQ,KACbc,SAASC,gBAAkBtB,KAAKK,MAAM,IAAIL,KAAKY,qBAGrDG,kBACMvB,OAAO+B,WAAW,qBAAqBC,QACrCxB,KAAKC,SAASwB,QAAQ,KAAOJ,SAASC,eAAetB,KAAKK,MAAMO,QAEhEZ,KAAKK,MAAMqB,QAAQL,SAASC,gBAAkB,GAAGtB,KAAKC,SAASW,YA7BhDrB,EAAIE,KAAKS,UCGlC,IAAIX,EAAIE,KAAKkC,YAAYjC,EAA8B,YCCrD,IAFAJ,IAAMsC,EAAc,GACdC,EAAkBR,SAASf,iBAAiBZ,GACzCoC,EAAI,EAAGA,EAAID,EAAgBrB,OAAQsB,IAAKF,EAAYG,KAAK,IAAIlC,EAAWgC,EAAgBC"}