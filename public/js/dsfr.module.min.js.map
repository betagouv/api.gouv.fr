{"version":3,"file":"dsfr.module.min.js","sources":["../../src/core/generated/scripts/config.js","../../src/core/api.js","../../src/core/scripts/global/namespace.js","../../src/core/scripts/manipulation/classes.js","../../src/core/scripts/engine/render/renderer.js","../../src/core/scripts/engine/engine.js","../../src/core/scripts/global/initializer.js","../../src/core/scripts/engine/instantiate/instance.js","../../src/core/scripts/disclosure/constants.js","../../src/core/scripts/disclosure/disclosures-group.js","../../src/core/scripts/disclosure/disclosure-button.js","../../src/core/scripts/disclosure/events.js","../../src/core/scripts/disclosure/disclosure.js","../../src/core/scripts/disclosure/disclosure-types.js","../../src/core/scripts/key-listener/key-listener.js","../../src/core/scripts/collapse/constants.js","../../src/core/scripts/collapse/collapse.js","../../src/core/index.js","../../src/core/scripts/manipulation/size.js","../../src/core/scripts/module.js","../../src/core/scripts/collapse/build.js","../../src/accordions/scripts/accordion/constants.js","../../src/accordions/scripts/accordion/accordions-group.js","../../src/accordions/index.js","../../src/accordions/scripts/module.js","../../src/breadcrumb/scripts/breadcrumb/constants.js","../../src/breadcrumb/scripts/breadcrumb/breadcrumb.js","../../src/breadcrumb/scripts/module.js","../../src/breadcrumb/scripts/breadcrumb/build.js","../../src/buttons/scripts/buttons/constants.js","../../src/buttons/scripts/module.js","../../src/buttons/scripts/buttons/build.js","../../src/modal/scripts/modal/constants.js","../../src/modal/scripts/modal/focus-trap.js","../../src/modal/scripts/modal/modals-group.js","../../src/modal/scripts/modal/modal.js","../../src/modal/index.js","../../src/modal/scripts/module.js","../../src/modal/scripts/modal/build.js","../../src/navigation/scripts/navigation/constants.js","../../src/navigation/scripts/navigation/navigation.js","../../src/navigation/index.js","../../src/navigation/scripts/module.js","../../src/schemes/scripts/scheme/constants.js","../../src/schemes/scripts/scheme/scheme.js","../../src/schemes/index.js","../../src/schemes/scripts/switch-theme/constants.js","../../src/schemes/scripts/switch-theme/switch-theme.js","../../src/schemes/scripts/module.js","../../src/schemes/scripts/scheme/build.js","../../src/schemes/scripts/switch-theme/build.js","../../src/sidemenu/scripts/sidemenu/constants.js","../../src/sidemenu/scripts/module.js","../../src/table/scripts/table/constants.js","../../src/table/scripts/table/table.js","../../src/table/index.js","../../src/table/scripts/table/build.js","../../src/table/scripts/module.js","../../src/tabs/scripts/tabs/tab-button.js","../../src/tabs/scripts/tabs/constants.js","../../src/tabs/scripts/tabs/tabs-group.js","../../src/tabs/scripts/tabs/tab.js","../../src/tabs/index.js","../../src/tabs/scripts/module.js","../../src/tabs/scripts/tabs/build.js","../../src/header/scripts/header/constants.js","../../src/header/scripts/header/header.js","../../src/header/index.js","../../src/header/scripts/module.js","../../src/header/scripts/header/build.js"],"sourcesContent":["export const prefix = 'fr';\r\nexport const namespace = 'dsfr';\r\nexport const organisation = '@gouvfr';\r\n","import { namespace } from './generated/scripts/config.js';\n\nconst api = window[namespace] || { core: {} };\nwindow[namespace] = api;\nexport default api;\n","import { prefix, namespace } from '../../generated/scripts/config.js';\n\nexport const ns = (name) => `${prefix}-${name}`;\n\nns.selector = (name, notation) => {\n  if (notation === undefined) notation = '.';\n  return `${notation}${ns(name)}`;\n};\n\nns.attr = (name, quoted, value) => `data-${ns(name)}`;\n\nns.attr.selector = (name, value) => {\n  let result = ns.attr(name);\n  if (value !== undefined) result += `=\"${value}\"`;\n  return `[${result}]`;\n};\n\nns.event = (type) => `${namespace}.${type}`;\n","const modifiyClass = (element, className, remove) => {\n  if (className.charAt(0) === '.') className = className.substr(1);\n  const classNames = element.className.split(' ');\n  const index = classNames.indexOf(className);\n  if (remove === true) {\n    if (index > -1) classNames.splice(index, 1);\n  } else if (index === -1) classNames.push(className);\n  element.className = classNames.join(' ');\n};\n\nconst addClass = (element, className) => modifiyClass(element, className);\n\nexport { addClass };\n\nconst removeClass = (element, className) => modifiyClass(element, className, true);\n\nexport { removeClass };\n","class Renderer {\n  constructor () {\n    this.closures = [];\n    this.nexts = [];\n    this.rendering = this.render.bind(this);\n    this.render();\n  }\n\n  add (closure) {\n    this.closures.push(closure);\n    const remove = () => {\n      const index = this.closures.indexOf(closure);\n      if (index !== -1) this.closures.splice(index, 1);\n    };\n    return remove;\n  }\n\n  next (closure, frame) {\n    frame = frame === undefined ? 0 : frame - 1;\n    if (this.nexts[frame] === undefined) this.nexts[frame] = [];\n    this.nexts[frame].push(closure);\n  }\n\n  render () {\n    window.requestAnimationFrame(this.rendering);\n    for (const closure of this.closures) closure.call();\n    const nexts = this.nexts.shift();\n    if (nexts) {\n      for (const closure of nexts) closure.call();\n    }\n  }\n}\n\nexport { Renderer };\n","import { Renderer } from './render/renderer';\n\n// TODO: initializer et renderer en 1, avec muttation observer pour ajouter et retirer les instances des objets attendus en fonctions de selecteurs spÃ©cifiques\nclass Engine {\n  constructor () {\n    this.renderer = new Renderer();\n    // this.instantier = new Instancier();\n  }\n\n  register (selector, factory) {\n\n  }\n\n  start () {\n    // this.renderer.start();\n  }\n\n  stop () {\n    // this.renderer.stop();\n  }\n}\n\nconst engine = new Engine();\n\nexport default engine;\n","class Initializer {\n  constructor (selector, builders) {\n    this.selector = selector;\n    this.builders = builders;\n    this.instances = [];\n\n    if (document.readyState !== 'loading') window.requestAnimationFrame(this.start.bind(this));\n    else document.addEventListener('DOMContentLoaded', this.start.bind(this));\n  }\n\n  start () {\n    if (this.instances.length > 0) return;\n\n    if (document.querySelectorAll(this.selector).length > 0) {\n      for (let i = 0; i < this.builders.length; i++) {\n        this.instances.push(this.builders[i]());\n      }\n    }\n  }\n}\n\nexport { Initializer };\n","const instances = { };\nconst elements = { };\nlet count = 0;\n\nconst getElementId = (element) => {\n  for (const id in elements) if (elements[id] === element) return id;\n  count++;\n  const id = count;\n  elements[id] = element;\n  return id;\n};\n\nclass Instance {\n  constructor (element, isResizing, isRendering) {\n    const id = getElementId(element);\n    if (!instances[id]) instances[id] = [];\n    instances[id].push(this);\n    this.element = element;\n    this.id = element.id;\n    this._isRendering = false;\n    this._isResizing = false;\n    this.listeners = {};\n\n    this.isResizing = isResizing;\n    this.isRendering = isRendering;\n  }\n\n  dispatch (type, data) {\n    const event = new CustomEvent(type, data);\n    this.element.dispatchEvent(event);\n  }\n\n  listen (type, closure) {\n    if (!this.listeners[type]) this.listeners[type] = [];\n    if (this.listeners[type].indexOf(closure) > -1) return;\n    this.listeners[type].push(closure);\n    this.element.addEventListener(type, closure);\n  }\n\n  unlisten (type, closure) {\n    if (!type) {\n      for (const type in this.listeners) this.unlisten(type);\n    } else if (!closure) {\n      if (!this.listeners[type]) return;\n      for (const closure of this.listeners[type]) this.element.removeEventListener(closure);\n      this.listeners[type].length = 0;\n    } else {\n      if (!this.listeners[type]) return;\n      const index = this.listeners[type].indexOf(closure);\n      if (index > -1) this.listeners[type].splice(index, 1);\n      this.element.removeEventListener(closure);\n    }\n  }\n\n  get isRendering () { return this._isRendering; }\n\n  set isRendering (value) {\n    if (this._isRendering === value) return;\n    this._isRendering = value;\n    // TODO add & remove rendering\n  }\n\n  render () {}\n\n  get isResizing () { return this._isResizing; }\n\n  set isResizing (value) {\n    if (this._isResizing === value) return;\n    this._isResizing = value;\n    // TODO add & remove resizing\n  }\n\n  resize () {}\n\n  destroy () {}\n\n  static getInstances (element, instanceClass) {\n    const id = getElementId(element);\n    if (!instances[id]) return null;\n    else if (!instanceClass) return instances[id];\n    else return instances[id].filter((instance) => instance instanceof instanceClass);\n  }\n}\n\nexport { Instance };\n","import { ns } from '../global/namespace.js';\n\nexport const GROUP_ATTR = ns.attr('group');\n","import { GROUP_ATTR } from './constants.js';\n\nconst groups = [];\n\nclass DisclosuresGroup {\n  constructor (id, element) {\n    this.id = id;\n    this.element = element;\n    this.members = [];\n    this._index = -1;\n    this._current = null;\n    groups.push(this);\n  }\n\n  static getGroupById (id) {\n    for (const group of groups) if (group.constructor === this && group.id === id) return group;\n    return new this(id);\n  }\n\n  static getGroupByElement (element) {\n    for (const group of groups) if (group.element === element) return group;\n    return new this(false, element);\n  }\n\n  static groupById (member, groupConstructor) {\n    const id = member.element.getAttribute(GROUP_ATTR);\n    if (id === null) return;\n\n    const group = groupConstructor.getGroupById(id);\n    group.add(member);\n  }\n\n  static groupByParent (member, GroupConstructor, groupSelector) {\n    if (groupSelector === undefined) groupSelector = GroupConstructor.selector;\n    if (groupSelector === '') return;\n    let element = member.element.parentElement;\n\n    while (element) {\n      if (element.classList.contains(member.constructor.selector)) return;\n\n      if (element.classList.contains(groupSelector)) {\n        const group = GroupConstructor.getGroupByElement(element);\n        group.add(member);\n        return;\n      }\n      element = element.parentElement;\n    }\n  }\n\n  static get selector () { return ''; }\n\n  add (member) {\n    if (this.members.indexOf(member) !== -1) return;\n    this.members.push(member);\n    member.setGroup(this);\n\n    switch (true) {\n      case this.current !== null:\n      case !member.disclosed && !member.primal:\n        member.disclosed = false;\n        break;\n\n      default:\n        this._current = member;\n        this._index = this.members.indexOf(member);\n        member.disclosed = true;\n    }\n  }\n\n  get length () { return this.members.length; }\n\n  get index () { return this._index; }\n\n  set index (value) {\n    if (value < -1 || value >= this.length || this._index === value) return;\n    if (this.current !== null) this.current.conceal(true, true);\n    this._index = value;\n    this._current = this._index > -1 ? this.members[this._index] : null;\n    if (this.current !== null) this.current.disclose(true);\n    this.apply();\n  }\n\n  get current () { return this._current; }\n\n  set current (member) {\n    this.index = this.members.indexOf(member);\n  }\n\n  get hasFocus () {\n    if (this.current === undefined) return null;\n    return this.current.hasFocus;\n  }\n\n  apply () {}\n}\n\nexport { DisclosuresGroup };\n","class DisclosureButton {\n  constructor (element, disclosure) {\n    this.element = element;\n    this.disclosure = disclosure;\n    this.hasAttribute = this.element.hasAttribute(this.disclosure.attributeName);\n    this.element.addEventListener('click', this.click.bind(this));\n    this.observer = new MutationObserver(this.mutate.bind(this));\n    this.observe();\n  }\n\n  observe () {\n    this.observer.observe(this.element, { attributes: true });\n  }\n\n  click (e) {\n    this.disclosure.change(this.hasAttribute);\n  }\n\n  mutate (mutations) {\n    mutations.forEach((mutation) => {\n      if (mutation.type === 'attributes' && mutation.attributeName === this.disclosure.attributeName) this.disclosure.change(this.disclosed);\n    });\n  }\n\n  apply (value) {\n    if (!this.hasAttribute) return;\n    if (this.observer) this.observer.disconnect();\n    this.element.setAttribute(this.disclosure.attributeName, value);\n    if (this.observer) this.observe();\n  }\n\n  get disclosed () {\n    return this.element.getAttribute(this.disclosure.attributeName) === 'true';\n  }\n\n  get hasFocus () {\n    return this.element === document.activeElement;\n  }\n}\n\nexport { DisclosureButton };\n","import { ns } from '../global/namespace.js';\n\nexport const DISCLOSE_EVENT = ns.event('DISCLOSE');\nexport const CONCEAL_EVENT = ns.event('CONCEAL');\n","import { DisclosuresGroup } from './disclosures-group.js';\nimport { DisclosureButton } from './disclosure-button.js';\nimport { addClass, removeClass } from '../manipulation/classes.js';\nimport { ns } from '../global/namespace.js';\nimport { Instance } from '../engine/instantiate/instance';\nimport { CONCEAL_EVENT, DISCLOSE_EVENT } from './events';\n\nconst disclosures = [];\n\nclass Disclosure extends Instance {\n  constructor (element) {\n    super(element);\n    this.buttons = [];\n    this._selector = this.constructor.selector;\n    this.modifier = this._selector + '--' + this.type.id;\n    this.attributeName = this.type.ariaState ? 'aria-' + this.type.id : ns.attr(this.type.id);\n    this.pristine = true;\n\n    const buttons = document.querySelectorAll(this.type.ariaControls ? `[aria-controls=\"${this.id}\"]` : ns.attr.selector('controls', this.id));\n\n    if (buttons.length > 0) for (let i = 0; i < buttons.length; i++) this.addButton(buttons[i]);\n\n    this.disclosed = this.primal === true;\n\n    this.gather();\n  }\n\n  gather () {\n    if (this.group) return;\n\n    DisclosuresGroup.groupById(this, this.GroupConstructor);\n    DisclosuresGroup.groupByParent(this, this.GroupConstructor);\n  }\n\n  static build (from) {\n    const elements = Array.prototype.slice.call(from.querySelectorAll(`.${this.selector}`));\n\n    for (const element of elements) disclosures.push(new this(element));\n  }\n\n  get type () { return this.constructor.type; }\n\n  static get type () { return null; }\n\n  static get selector () { return ''; }\n\n  addButton (element) {\n    const button = this.buttonFactory(element);\n    if (button.hasAttribute) {\n      if (this.primal === undefined) {\n        this.primal = button.disclosed;\n      } else button.apply(this.primal);\n    }\n    this.buttons.push(button);\n  }\n\n  get GroupConstructor () { return DisclosuresGroup; }\n\n  buttonFactory (button) {\n    return new DisclosureButton(button, this);\n  }\n\n  disclose (withhold) {\n    if (this.disclosed) return false;\n    this.pristine = false;\n    this.disclosed = true;\n    if (!withhold && this.group !== undefined) this.group.current = this;\n    return true;\n  }\n\n  conceal (withhold, preventFocus) {\n    if (!this.disclosed) return false;\n    this.pristine = false;\n    this.disclosed = false;\n    if (!preventFocus) this.focus();\n    if (!withhold && this.group !== undefined) this.group.current = null;\n    for (const disclosure of disclosures) if (disclosure !== this && this.element.contains(disclosure.element)) disclosure.reset();\n    return true;\n  }\n\n  get disclosed () {\n    return this._disclosed;\n  }\n\n  set disclosed (value) {\n    if (this._disclosed === value) return;\n    this.dispatch(value ? DISCLOSE_EVENT : CONCEAL_EVENT, this.type);\n    this._disclosed = value;\n    if (value) addClass(this.element, this.modifier);\n    else removeClass(this.element, this.modifier);\n    for (let i = 0; i < this.buttons.length; i++) this.buttons[i].apply(value);\n  }\n\n  reset () {}\n\n  change (hasAttribute) {\n    if (!this.constructor.type.canConceal) this.disclose();\n    else {\n      switch (true) {\n        case !hasAttribute:\n        case this.disclosed:\n          this.conceal();\n          break;\n\n        default:\n          this.disclose();\n      }\n    }\n  }\n\n  setGroup (group) {\n    this.group = group;\n  }\n\n  get buttonHasFocus () {\n    if (this.buttons.some((button) => { return button.hasFocus; })) return true;\n    return false;\n  }\n\n  get hasFocus () {\n    if (this.element === document.activeElement) return true;\n    if (this.element.querySelectorAll(':focus').length > 0) return true;\n    return this.buttonHasFocus;\n  }\n\n  focus () {\n    for (let i = 0; i < this.buttons.length; i++) {\n      const button = this.buttons[i];\n      if (button.hasAttribute) {\n        button.element.focus();\n        return;\n      }\n    }\n  }\n}\n\nDisclosure.DISCLOSE_EVENT = DISCLOSE_EVENT;\nDisclosure.CONCEAL_EVENT = CONCEAL_EVENT;\n\nexport { Disclosure };\n","export const DISCLOSURE_TYPES = {\n  expand: {\n    id: 'expanded',\n    ariaState: true,\n    ariaControls: true,\n    canConceal: true\n  },\n  select: {\n    id: 'selected',\n    ariaState: true,\n    ariaControls: true,\n    canConceal: false\n  },\n  opened: {\n    id: 'opened',\n    ariaState: false,\n    ariaControls: true,\n    canConceal: true\n  }\n};\n","/**\n * Utilitaire de gestion des Ã©venements clavier\n * Utiliser KeyListener.add() pour ajouter un event listener\n */\nclass KeyListener {\n  constructor (element) {\n    this.element = element;\n    this.collections = {};\n  }\n\n  /**\n   * key: la touche de clavier\n   * closure: la function Ã  appliquer\n   * type: event type, optionnel, si c'est en down, up ou press\n   * stopPropagation: Boolean, permet d'empÃªcher le comportement par default de l'evenement\n   */\n  _add (type, action) {\n    if (this.collections[type] === undefined) this.collections[type] = new KeyActionCollection(type, this.element);\n    this.collections[type].add(action);\n  }\n\n  down (key, closure, preventDefault, stopPropagation) {\n    this._add('down', new KeyAction(key, closure, preventDefault, stopPropagation));\n  }\n\n  up (key, closure, preventDefault, stopPropagation) {\n    this._add('up', new KeyAction(key, closure, preventDefault, stopPropagation));\n  }\n\n  dispose () {\n    for (const collection of this.collections) collection.dispose();\n    this.types = null;\n  }\n}\n\nclass KeyActionCollection {\n  constructor (type, element) {\n    this.type = type;\n    this.element = element;\n    this.actions = [];\n    this.binding = this.handle.bind(this);\n    this.element.addEventListener('key' + type, this.binding);\n  }\n\n  add (action) {\n    this.actions.push(action);\n  }\n\n  handle (e) {\n    for (const action of this.actions) action.handle(e);\n  }\n\n  dispose () {\n    this.element.removeEventListener('key' + this.type, this.binding);\n    this.actions = null;\n  }\n}\n\nclass KeyAction {\n  constructor (key, closure, preventDefault, stopPropagation) {\n    this.key = key;\n    this.closure = closure;\n    this.preventDefault = preventDefault === true;\n    this.stopPropagation = stopPropagation === true;\n  }\n\n  handle (e) {\n    if (e.keyCode === this.key) {\n      this.closure(e);\n      if (this.preventDefault) {\n        e.preventDefault();\n      }\n      if (this.stopPropagation) {\n        e.stopPropagation();\n      }\n    }\n  }\n}\n\nKeyListener.TAB = 9;\nKeyListener.ESCAPE = 27;\nKeyListener.END = 35;\nKeyListener.HOME = 36;\nKeyListener.LEFT = 37;\nKeyListener.UP = 38;\nKeyListener.RIGHT = 39;\nKeyListener.DOWN = 40;\n\nexport { KeyListener };\n","import { ns } from '../global/namespace.js';\n\nexport const COLLAPSE_CLASS = ns('collapse');\n","import { Disclosure } from '../disclosure/disclosure.js';\nimport { DisclosuresGroup } from '../disclosure/disclosures-group.js';\nimport { COLLAPSE_CLASS } from './constants.js';\nimport { DISCLOSURE_TYPES } from '../disclosure/disclosure-types.js';\n\nconst collapses = [];\nconst ascendants = {};\n\n/**\n * Tab coorespond au panel d'un Ã©lement Tabs (tab panel)\n * Tab Ã©tend disclosure qui ajoute/enleve le modifier --selected,\n * et ajoute/eleve l'attribut hidden, sur le panel\n */\nclass Collapse extends Disclosure {\n  constructor (element) {\n    super(element);\n    collapses.push(this);\n    this.requesting = this.request.bind(this);\n    element.addEventListener('transitionend', this.transitionend.bind(this));\n    if (this.disclosed) this.unbound();\n  }\n\n  gatherByAscendants () {\n    if (this.group) return;\n\n    for (const ascendant in ascendants) {\n      let element = this.element.parentElement;\n\n      while (element) {\n        if (element.classList.contains(ascendant)) {\n          if (typeof ascendants[ascendant] === 'string') {\n            DisclosuresGroup.groupByParent(this, DisclosuresGroup, ascendants[ascendant]);\n          } else {\n            DisclosuresGroup.groupByParent(this, ascendants[ascendant]);\n          }\n          return;\n        }\n\n        element = element.parentElement;\n      }\n    }\n  }\n\n  gather () {\n    this.gatherByAscendants();\n    super.gather();\n  }\n\n  static get type () { return DISCLOSURE_TYPES.expand; }\n  static get selector () { return COLLAPSE_CLASS; }\n\n  static register (ascendant, groupSelector) {\n    ascendants[ascendant] = groupSelector;\n    for (const collapse of collapses) collapse.gatherByAscendants();\n  }\n\n  transitionend (e) {\n    if (!this.disclosed) this.element.style.maxHeight = '';\n  }\n\n  unbound () {\n    this.element.style.maxHeight = 'none';\n  }\n\n  disclose (withhold) {\n    if (this.disclosed) return;\n    this.unbound();\n    this.adjust();\n    this.requested = () => { super.disclose(withhold); };\n    window.requestAnimationFrame(this.requesting);\n  }\n\n  conceal (withhold, preventFocus) {\n    if (!this.disclosed) return;\n    this.adjust();\n    this.requested = () => { super.conceal(withhold, preventFocus); };\n    window.requestAnimationFrame(this.requesting);\n  }\n\n  request () {\n    if (this.requested) this.requested();\n    this.requested = null;\n  }\n\n  adjust () {\n    this.element.style.setProperty('--collapser', 'none');\n    const height = this.element.offsetHeight;\n    this.element.style.setProperty('--collapse', -height + 'px');\n    this.element.style.setProperty('--collapser', '');\n  }\n\n  reset () {\n    if (!this.pristine) this.disclosed = false;\n  }\n}\n\nexport { Collapse };\n","import api from './api.js';\nimport { ns } from './scripts/global/namespace.js';\nimport { addClass, removeClass } from './scripts/manipulation/classes.js';\nimport engine from './scripts/engine/engine.js';\nimport { Initializer } from './scripts/global/initializer.js';\nimport { Instance } from './scripts/engine/instantiate/instance.js';\n\nimport { Disclosure } from './scripts/disclosure/disclosure.js';\nimport { DisclosureButton } from './scripts/disclosure/disclosure-button.js';\nimport { DisclosuresGroup } from './scripts/disclosure/disclosures-group.js';\nimport { DISCLOSURE_TYPES } from './scripts/disclosure/disclosure-types.js';\n\nimport { KeyListener } from './scripts/key-listener/key-listener.js';\nimport { Collapse } from './scripts/collapse/collapse.js';\nimport { Equisized } from './scripts/manipulation/size.js';\n\napi.core.ns = ns;\napi.core.addClass = addClass;\napi.core.removeClass = removeClass;\napi.core.engine = engine;\napi.core.Instance = Instance;\napi.core.Initializer = Initializer;\napi.core.Disclosure = Disclosure;\napi.core.DisclosureButton = DisclosureButton;\napi.core.DisclosuresGroup = DisclosuresGroup;\napi.core.DISCLOSURE_TYPES = DISCLOSURE_TYPES;\n\napi.KeyListener = KeyListener;\napi.Collapse = Collapse;\napi.Equisized = Equisized;\n","class EquisizedGroup {\n  constructor (selector, groups) {\n    this.selector = selector;\n    this.groups = typeof groups === 'string' ? document.querySelectorAll(groups) : groups;\n\n    for (let i = 0; i < this.groups.length; i++) {\n      this.equisizedGroups.push(new Equisized(this.selector, this.groups[i]));\n    }\n\n    this.changing = this.change.bind(this);\n    window.addEventListener('resize', this.changing);\n    this.change();\n  }\n\n  change () {\n    for (let i = 0; i < this.equisizedGroups.length; i++) {\n      this.equisizedGroups[i].change();\n    }\n  }\n}\n\nclass Equisized {\n  constructor (selector, group) {\n    this.selector = selector;\n    this.group = group;\n    this.elements = this.group.querySelectorAll(this.selector);\n    this.maxWidth = 0;\n\n    this.changing = this.change.bind(this);\n    window.addEventListener('resize', this.changing);\n    window.addEventListener('load', this.changing); // fix change before css load\n    // this.change();\n  }\n\n  change () {\n    this.reset();\n    for (let i = 0; i < this.elements.length; i++) {\n      const tmpWWidth = this._getWidth(this.elements[i]);\n      if (tmpWWidth > this.maxWidth) {\n        this.maxWidth = tmpWWidth;\n      }\n    }\n    this.apply();\n  }\n\n  apply () {\n    for (let i = 0; i < this.elements.length; i++) {\n      this.elements[i].style.width = this.maxWidth + 1 + 'px';\n    }\n  }\n\n  reset () {\n    for (let i = 0; i < this.elements.length; i++) {\n      this.elements[i].style.width = 'auto';\n    }\n    this.maxWidth = 0;\n  }\n\n  _getWidth (el) {\n    let width = el.offsetWidth;\n    const style = getComputedStyle(el);\n    width += parseInt(style.marginLeft) + parseInt(style.marginRight);\n    return width;\n  }\n}\n\nexport { Equisized, EquisizedGroup };\n","/* eslint-disable no-new */\nimport { Initializer } from './global/initializer.js';\nimport build from './collapse/build.js';\nimport { COLLAPSE_CLASS } from './collapse/constants.js';\n\nnew Initializer(`.${COLLAPSE_CLASS}`, [build]);\n","import { Collapse } from './collapse.js';\n\nconst build = () => {\n  Collapse.build(document);\n};\n\nexport default build;\n","import api from '../../api.js';\n\nexport const ACCORDIONS_GROUP = api.core.ns('accordions-group');\nexport const ACCORDION_ASCENDANT = api.core.ns('accordion');\n","import api from '../../api.js';\nimport { ACCORDIONS_GROUP } from './constants.js';\n\nclass AccordionsGroup extends api.core.DisclosuresGroup {\n  static get selector () { return ACCORDIONS_GROUP; }\n}\n\nexport { AccordionsGroup };\n","import api from './api.js';\nimport { AccordionsGroup } from './scripts/accordion/accordions-group.js';\n\napi.AccordionsGroup = AccordionsGroup;\n","import api from '../api.js';\nimport { ACCORDION_ASCENDANT } from './accordion/constants.js';\nimport { AccordionsGroup } from './accordion/accordions-group.js';\n\napi.Collapse.register(ACCORDION_ASCENDANT, AccordionsGroup);\n","import api from '../../api.js';\n\nexport const BREADCRUMB_COLLAPSE_SELECTOR = `${api.core.ns.selector('breadcrumb')} ${api.core.ns.selector('collapse')}`;\n","import api from '../../api.js';\n\nclass Breadcrumb extends api.core.Instance {\n  constructor (element) {\n    super(element);\n    this.collapse = api.core.Instance.getInstances(element, api.Collapse)[0];\n    this.links = [...this.element.querySelectorAll('a[href]')];\n    this.count = 0;\n    if (this.links.length) {\n      this.listen(api.core.Disclosure.DISCLOSE_EVENT, this.focus.bind(this));\n      // TODO: refactor avec instance\n      this.resizing = this.resize.bind(this);\n      window.addEventListener('resize', this.resizing);\n    }\n  }\n\n  focus () {\n    this.links[0].focus();\n    api.core.engine.renderer.next(() => { this.verify(); });\n  }\n\n  verify () {\n    this.count++;\n    if (this.count > 100) return;\n    if (document.activeElement !== this.links[0]) this.focus();\n  }\n\n  resize () {\n    if (window.matchMedia('(min-width: 48em)').matches) {\n      if (this.collapse.buttons[0] === document.activeElement) this.links.focus();\n    } else {\n      if (this.links.indexOf(document.activeElement) > -1) this.collapse.focus();\n    }\n  }\n}\n\nexport { Breadcrumb };\n","/* eslint-disable no-new */\nimport api from '../api.js';\nimport build from './breadcrumb/build.js';\nimport { BREADCRUMB_COLLAPSE_SELECTOR } from './breadcrumb/constants';\n\nnew api.core.Initializer(BREADCRUMB_COLLAPSE_SELECTOR, [build]);\n","import { BREADCRUMB_COLLAPSE_SELECTOR } from './constants';\nimport { Breadcrumb } from './breadcrumb';\n\nconst build = () => {\n  const breadcrumbs = [];\n  const breadcrumbNodes = document.querySelectorAll(BREADCRUMB_COLLAPSE_SELECTOR);\n  for (let i = 0; i < breadcrumbNodes.length; i++) breadcrumbs.push(new Breadcrumb(breadcrumbNodes[i]));\n};\n\nexport default build;\n","import api from '../../api.js';\n\nexport const BUTTON_SELECTOR = api.core.ns.selector('btn');\nexport const BUTTONS_GROUP_SELECTOR = api.core.ns.selector('btns-group');\nexport const EQUISIZED_BUTTONS_GROUP_SELECTOR = api.core.ns.selector('btns-group--equisized');\n","/* eslint-disable no-new */\nimport api from '../api.js';\n\nimport build from './buttons/build.js';\nimport { BUTTONS_GROUP_SELECTOR } from './buttons/constants';\n\nnew api.core.Initializer(BUTTONS_GROUP_SELECTOR, [build]);\n","import api from '../../api.js';\nimport { BUTTON_SELECTOR, EQUISIZED_BUTTONS_GROUP_SELECTOR } from './constants';\n\nconst build = () => {\n  const group = document.querySelectorAll(EQUISIZED_BUTTONS_GROUP_SELECTOR);\n  const arrayEquisized = [];\n  for (let i = 0; i < group.length; i++) {\n    arrayEquisized.push(new api.Equisized(BUTTON_SELECTOR, group[i]));\n  }\n};\n\nexport default build;\n","import api from '../../api.js';\n\nexport const MODAL_SELECTOR = api.core.ns.selector('modal');\nexport const MODAL_CLASS = api.core.ns('modal');\nexport const NO_SCROLL_CLASS = api.core.ns('no-scroll');\nexport const SCROLL_SHADOW_CLASS = api.core.ns('scroll-shadow');\nexport const MODAL_BODY_SELECTOR = api.core.ns.selector('modal__body');\nexport const OFFSET_MOBILE = 32; // 32px => 8v => 2rem\n","import api from '../../api.js';\n\nconst unordereds = [\n  '[tabindex=\"0\"]',\n  'a[href]',\n  'button:not([disabled])',\n  'input:not([disabled])',\n  'select:not([disabled])',\n  'textarea:not([disabled])',\n  'audio[controls]',\n  'video[controls]',\n  '[contenteditable]:not([contenteditable=\"false\" i])',\n  'details>summary:first-of-type',\n  'details'\n];\n\nconst UNORDEREDS = unordereds.join();\n\nconst ordereds = [\n  '[tabindex]:not([tabindex=\"-1\"]):not([tabindex=\"0\"])'\n];\n\nconst ORDEREDS = ordereds.join();\n\nconst isFocusable = (element, container) => {\n  if (window.getComputedStyle(element).visibility === 'hidden') return false;\n  if (container === undefined) container = element;\n\n  while (container.contains(element)) {\n    if (window.getComputedStyle(element).display === 'none') return false;\n    element = element.parentElement;\n  }\n\n  return true;\n};\n\nclass FocusTrap {\n  constructor (onTrap, onUntrap) {\n    this.element = null;\n    this.activeElement = null;\n    this.onTrap = onTrap;\n    this.onUntrap = onUntrap;\n    this.waiting = this.wait.bind(this);\n    this.handling = this.handle.bind(this);\n    this.current = null;\n  }\n\n  get trapped () { return this.element !== null; }\n\n  trap (element) {\n    if (this.trapped) this.untrap();\n\n    this.element = element;\n    this.isTrapping = true;\n    this.wait();\n\n    if (this.onTrap) this.onTrap();\n  }\n\n  wait () {\n    if (!isFocusable(this.element)) {\n      api.core.engine.renderer.next(this.waiting);\n      return;\n    }\n\n    this.trapping();\n  }\n\n  trapping () {\n    if (!this.isTrapping) return;\n    this.isTrapping = false;\n    const focusables = this.focusables;\n    if (focusables.length) focusables[0].focus();\n    this.element.setAttribute('aria-modal', true);\n    this.element.addEventListener('keydown', this.handling);\n\n    this.stunneds = [];\n    // this.stun(document.body);\n  }\n\n  stun (node) {\n    for (const child of node.children) {\n      if (child === this.element) continue;\n      if (child.contains(this.element)) {\n        this.stun(child);\n        continue;\n      }\n      this.stunneds.push(new Stunned(child));\n    }\n  }\n\n  handle (e) {\n    if (e.keyCode !== 9) return;\n\n    const focusables = this.focusables;\n    if (focusables.length === 0) return;\n\n    const first = focusables[0];\n    const last = focusables[focusables.length - 1];\n\n    const index = focusables.indexOf(document.activeElement);\n\n    if (e.shiftKey) {\n      if (!this.element.contains(document.activeElement) || index < 1) {\n        e.preventDefault();\n        last.focus();\n      } else if (document.activeElement.tabIndex > 0 || focusables[index - 1].tabIndex > 0) {\n        e.preventDefault();\n        focusables[index - 1].focus();\n      }\n    } else {\n      if (!this.element.contains(document.activeElement) || index === focusables.length - 1 || index === -1) {\n        e.preventDefault();\n        first.focus();\n      } else if (document.activeElement.tabIndex > 0) {\n        e.preventDefault();\n        focusables[index + 1].focus();\n      }\n    }\n  }\n\n  get focusables () {\n    let unordereds = [...this.element.querySelectorAll(UNORDEREDS)];\n\n    /**\n     *  filtrage des radiobutttons de mÃªme name (la navigations d'un groupe de radio se fait Ã  la flÃ¨che et non pas au tab\n     **/\n    const radios = [...document.documentElement.querySelectorAll('input[type=\"radio\"]')];\n\n    if (radios.length) {\n      const groups = {};\n\n      for (const radio of radios) {\n        const name = radio.getAttribute('name');\n        if (groups[name] === undefined) groups[name] = new RadioButtonGroup(name);\n        groups[name].push(radio);\n      }\n\n      unordereds = unordereds.filter((unordered) => {\n        if (unordered.tagName.toLowerCase() !== 'input' || unordered.getAttribute('type').toLowerCase() !== 'radio') return true;\n        const name = unordered.getAttribute('name');\n        return groups[name].keep(unordered);\n      });\n    }\n\n    const ordereds = [...this.element.querySelectorAll(ORDEREDS)];\n\n    ordereds.sort((a, b) => a.tabIndex - b.tabIndex);\n\n    const noDuplicates = unordereds.filter((element) => ordereds.indexOf(element) === -1);\n    const concateneds = ordereds.concat(noDuplicates);\n    return concateneds.filter((element) => element.tabIndex !== '-1' && isFocusable(element, this.element));\n  }\n\n  untrap () {\n    if (!this.trapped) return;\n    this.isTrapping = false;\n\n    this.element.removeAttribute('aria-modal');\n    this.element.removeEventListener('keydown', this.handling);\n    this.element = null;\n\n    // for (const stunned of this.stunneds) stunned.unstun();\n    // this.stunneds = [];\n\n    if (this.onUntrap) this.onUntrap();\n  }\n}\n\nclass Stunned {\n  constructor (element) {\n    this.element = element;\n    this.hidden = element.getAttribute('aria-hidden');\n    this.inert = element.getAttribute('inert');\n\n    this.element.setAttribute('aria-hidden', true);\n    this.element.setAttribute('inert', '');\n  }\n\n  unstun () {\n    if (this.hidden === null) this.element.removeAttribute('aria-hidden');\n    else this.element.setAttribute('aria-hidden', this.hidden);\n\n    if (this.inert === null) this.element.removeAttribute('inert');\n    else this.element.setAttribute('inert', this.inert);\n  }\n}\n\nclass RadioButtonGroup {\n  constructor (name) {\n    this.name = name;\n    this.buttons = [];\n  }\n\n  push (button) {\n    this.buttons.push(button);\n    if (button === document.activeElement || button.checked || this.selected === undefined) this.selected = button;\n  }\n\n  keep (button) {\n    return this.selected === button;\n  }\n}\n\nexport { FocusTrap };\n","import api from '../../api.js';\nimport { FocusTrap } from './focus-trap.js';\n\nclass ModalsGroup extends api.core.DisclosuresGroup {\n  constructor () {\n    super();\n    this.trap = new FocusTrap();\n  }\n\n  apply (value, initial) {\n    super.apply(value, initial);\n    if (this.current === null) this.trap.untrap();\n    else this.trap.trap(this.current.element);\n  }\n}\n\nexport { ModalsGroup };\n","import api from '../../api.js';\nimport {\n  OFFSET_MOBILE,\n  NO_SCROLL_CLASS,\n  MODAL_CLASS,\n  SCROLL_SHADOW_CLASS,\n  MODAL_BODY_SELECTOR\n} from './constants';\nimport { ModalsGroup } from './modals-group';\n\nconst group = new ModalsGroup();\n\nclass Modal extends api.core.Disclosure {\n  constructor (element) {\n    super(element);\n    this.body = this.element.querySelector(MODAL_BODY_SELECTOR);\n    this.scrollDistance = 0;\n    this.scrolling = this.resize.bind(this, false);\n    this.resizing = this.resize.bind(this, true);\n    this.init();\n    this.resize(true);\n  }\n\n  init () {\n    this.element.addEventListener('click', this.click.bind(this));\n\n    this.keyListener = new api.KeyListener(this.element);\n    this.keyListener.down(api.KeyListener.ESCAPE, this.conceal.bind(this), true, true);\n\n    if (this.body) {\n      this.body.addEventListener('scroll', this.scrolling);\n      window.addEventListener('resize', this.resizing);\n      // window.addEventListener('orientationchange', this.resizing);\n    }\n  }\n\n  click (e) {\n    if (this.body && this.body !== e.target && !this.body.contains(e.target)) this.conceal();\n  }\n\n  gather () {\n    group.add(this);\n  }\n\n  disclose (withhold) {\n    if (!super.disclose(withhold)) return false;\n    this.resize(true);\n    this.handleScroll(false);\n    return true;\n  }\n\n  conceal (withhold, preventFocus) {\n    if (!super.conceal(withhold, preventFocus)) return false;\n    this.handleScroll(true);\n    return true;\n  }\n\n  /**\n   * Fixe l'arriÃ¨re plan quand la modal est ouverte\n   */\n  // TODO: crÃ©er une fonction de fix de scroll dans core (api.noScroll = true)\n  handleScroll (isScrollable) {\n    if (isScrollable) {\n      api.core.removeClass(document.documentElement, NO_SCROLL_CLASS);\n      document.body.style.top = '';\n      window.scroll(0, this.scrollDistance);\n    } else {\n      if (!document.documentElement.classList.contains(NO_SCROLL_CLASS)) {\n        this.scrollDistance = window.scrollY;\n      }\n      document.body.style.top = this.scrollDistance * -1 + 'px';\n      api.core.addClass(document.documentElement, NO_SCROLL_CLASS);\n    }\n  }\n\n  /**\n   * Ajoute une ombre autour du footer lorsque l'on peut scroller dans la modale\n   * corrige le 100vh, en mobile notamment, lorsque la barre navigateur est prÃ©sente par exemple.\n   */\n  resize (isResizing, e) {\n    if (!this.body) return;\n    if (this.body.scrollHeight > this.body.clientHeight) {\n      if (this.body.offsetHeight + this.body.scrollTop >= this.body.scrollHeight) {\n        api.core.removeClass(this.body, SCROLL_SHADOW_CLASS);\n      } else {\n        api.core.addClass(this.body, SCROLL_SHADOW_CLASS);\n      }\n    } else {\n      api.core.removeClass(this.body, SCROLL_SHADOW_CLASS);\n    }\n\n    if (isResizing) {\n      this.body.style.maxHeight = (window.innerHeight - OFFSET_MOBILE) + 'px';\n\n      // Une deuxiÃ¨me fois aprÃ¨s positionnement des barres du navigateur (ios)\n      // TODO: Ã  tester si fonctionnel sans setTimeout\n      api.core.engine.renderer.next(() => {\n        this.body.style.maxHeight = (window.innerHeight - OFFSET_MOBILE) + 'px';\n      });\n    }\n  }\n\n  static get type () { return api.core.DISCLOSURE_TYPES.opened; }\n  static get selector () { return MODAL_CLASS; }\n\n  get GroupConstructor () { return ModalsGroup; }\n}\n\nexport { Modal };\n","import api from './api.js';\n\nimport { Modal } from './scripts/modal/modal';\nimport { ModalsGroup } from './scripts/modal/modals-group';\nimport { FocusTrap } from './scripts/modal/focus-trap';\n\napi.Modal = Modal;\napi.ModalsGroup = ModalsGroup;\napi.FocusTrap = FocusTrap;\n","/* eslint-disable no-new */\nimport api from '../api.js';\nimport { build } from './modal/build.js';\nimport { MODAL_SELECTOR } from './modal/constants.js';\n\nnew api.core.Initializer(MODAL_SELECTOR, [build]);\n","import { Modal } from './modal';\n\n/**\n * initialise tout les Ã©lÃ©ments Modal dans la page\n */\nconst build = () => {\n  Modal.build(document);\n};\n\nexport { build };\n","import api from '../../api.js';\n\nexport const NAVIGATION_CLASS = api.core.ns('nav');\nexport const NAVIGATION_LIST_CLASS = api.core.ns('nav__list');\nexport const NAVIGATION_ITEM_CLASS = api.core.ns('nav__item');\nexport const NAVIGATION_ITEM_RIGHT_CLASS = api.core.ns('nav__item--align-right');\nexport const NAVIGATION_MENU_CLASS = api.core.ns('menu');\n","import api from '../../api.js';\nimport {\n  NAVIGATION_CLASS,\n  NAVIGATION_ITEM_CLASS,\n  NAVIGATION_LIST_CLASS,\n  NAVIGATION_MENU_CLASS,\n  NAVIGATION_ITEM_RIGHT_CLASS\n} from './constants';\n\nclass Navigation extends api.core.DisclosuresGroup {\n  constructor (id, element) {\n    super(id, element);\n\n    this.menus = [];\n\n    this.navList = element.querySelector(`.${NAVIGATION_LIST_CLASS}`);\n\n    document.addEventListener('focusout', this.focusOut.bind(this));\n    window.addEventListener('resize', this.resize.bind(this));\n    window.addEventListener('orientationchange', this.resize.bind(this));\n    this.resize();\n  }\n\n  static get selector () { return NAVIGATION_CLASS; }\n\n  add (member) {\n    super.add(member);\n\n    if (member.element.classList.contains(NAVIGATION_MENU_CLASS)) {\n      this.menus.push(new NavigationMenu(member, this.navList.getBoundingClientRect().right));\n    }\n  }\n\n  focusOut (e) {\n    requestAnimationFrame(() => {\n      if (this.current !== null && !this.current.hasFocus) this.index = -1;\n    });\n  }\n\n  get index () { return super.index; }\n\n  set index (value) {\n    if (value === -1 && this.current !== null && this.current.hasFocus) this.current.focus();\n    super.index = value;\n  }\n\n  resize () {\n    const right = this.navList.getBoundingClientRect().right;\n\n    for (const menu of this.menus) menu.place(right);\n  }\n}\n\nclass NavigationMenu {\n  constructor (collapse, right) {\n    this.initialize(collapse);\n    this.place(right);\n  }\n\n  initialize (collapse) {\n    this.element = collapse.element;\n\n    for (const button of collapse.buttons) {\n      if (!button.hasAttribute) continue;\n      this.button = button.element;\n      break;\n    }\n\n    let item = this.element.parentElement;\n    while (item) {\n      if (item.classList.contains(NAVIGATION_ITEM_CLASS)) {\n        this.item = item;\n        break;\n      }\n      item = item.parentElement;\n    }\n  }\n\n  place (right) {\n    const styles = getComputedStyle(this.element);\n    const width = parseFloat(styles.width);\n    const left = this.button.getBoundingClientRect().left;\n\n    if (left + width > right) api.core.addClass(this.item, NAVIGATION_ITEM_RIGHT_CLASS);\n    else api.core.removeClass(this.item, NAVIGATION_ITEM_RIGHT_CLASS);\n  }\n}\n\nexport { Navigation };\n","import api from './api.js';\nimport { Navigation } from './scripts/navigation/navigation';\n\napi.Navigation = Navigation;\n","import api from '../api.js';\nimport { NAVIGATION_CLASS } from './navigation/constants.js';\nimport { Navigation } from './navigation/navigation.js';\n\napi.Collapse.register(NAVIGATION_CLASS, Navigation);\n","import api from '../../api.js';\n\nexport const SCHEME_ATTR = api.core.ns.attr('theme');\nexport const TRANSITION_ATTR = api.core.ns.attr('transition');\n","import { SCHEME_ATTR, TRANSITION_ATTR } from './constants';\n\n/**\n * TODO: implÃ©menter la valeur system\n * window.matchMedia(\"(prefers-color-scheme: dark)\").addListener(\n e => e.matches && activateDarkMode()) // listener\n );\n */\n\nclass Scheme {\n  constructor () {\n    this.init();\n  }\n\n  init () {\n    this.root = document.documentElement;\n\n    this.scheme = localStorage.getItem('scheme')\n      ? localStorage.getItem('scheme')\n      : null;\n\n    if (this.scheme === null) {\n      const scheme = this.root.getAttribute(SCHEME_ATTR);\n      if (scheme === 'dark' || scheme === 'light') {\n        this.scheme = scheme;\n      } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {\n        this.scheme = 'dark';\n        localStorage.setItem('scheme', 'dark');\n      } else this.scheme = 'light';\n    }\n\n    if (this.scheme === 'dark') {\n      if (!this.root.hasAttribute(TRANSITION_ATTR)) {\n        this.root.setAttribute(SCHEME_ATTR, 'dark');\n      } else {\n        this.root.removeAttribute(TRANSITION_ATTR);\n        this.root.setAttribute(SCHEME_ATTR, 'dark');\n\n        setTimeout(() => {\n          this.root.setAttribute(TRANSITION_ATTR, '');\n        }, 300);\n      }\n    } else this.root.setAttribute(SCHEME_ATTR, 'light');\n\n    this.observer = new MutationObserver(this.mutate.bind(this));\n    this.observer.observe(this.root, { attributes: true });\n  }\n\n  mutate (mutations) {\n    mutations.forEach((mutation) => {\n      if (mutation.type === 'attributes' && mutation.attributeName === SCHEME_ATTR) {\n        const scheme = this.root.getAttribute(SCHEME_ATTR);\n        if (scheme === 'dark') {\n          localStorage.setItem('scheme', 'dark');\n        } else if (scheme === 'light') {\n          localStorage.setItem('scheme', 'light');\n        }\n      }\n    });\n  }\n}\n\nexport { Scheme };\n","import api from './api.js';\nimport { Scheme } from './scripts/scheme/scheme';\n\napi.Scheme = Scheme;\n","import api from '../../api.js';\n\nexport const RADIOS_THEME_NAME = `input[name=\"${api.core.ns.selector('radios-theme', '')}\"]`;\nexport const SWITCH_THEME_ID = api.core.ns.selector('switch-theme', '#');\nexport const THEME_ATTR = api.core.ns.attr('theme');\n","import { RADIOS_THEME_NAME, THEME_ATTR } from './constants';\n\nclass SwitchTheme {\n  constructor () {\n    this.attributeName = THEME_ATTR;\n    this.theme = null;\n    this.radios = document.querySelectorAll(RADIOS_THEME_NAME);\n\n    for (var i = 0; i < this.radios.length; i++) {\n      this.radios[i].addEventListener('change', this.change.bind(this));\n    }\n\n    this.observer = new MutationObserver(this.mutate.bind(this));\n    this.observe();\n    this.apply();\n  }\n\n  observe () {\n    this.observer.observe(document.documentElement, { attributes: true });\n  }\n\n  mutate (mutations) {\n    mutations.forEach((mutation) => {\n      if (mutation.type === 'attributes' && mutation.attributeName === this.attributeName) {\n        this.apply();\n      }\n    });\n  }\n\n  apply () {\n    const theme = document.documentElement.getAttribute(this.attributeName);\n    this.isApplying = true;\n    for (var i = 0; i < this.radios.length; i++) {\n      this.radios[i].checked = this.radios[i].value === theme;\n    }\n    this.isApplying = false;\n  }\n\n  change () {\n    if (this.isApplying) return;\n    if (this.observer) this.observer.disconnect();\n    this.theme = document.querySelector(RADIOS_THEME_NAME + ':checked');\n    if (this.theme) {\n      document.documentElement.setAttribute(this.attributeName, this.theme.value);\n    } else {\n      document.documentElement.removeAttribute(this.attributeName);\n    }\n    if (this.observer) this.observe();\n  }\n}\n\nexport { SwitchTheme };\n","/* eslint-disable no-new */\nimport api from '../api.js';\nimport { SCHEME_ATTR } from './scheme/constants';\nimport { SWITCH_THEME_ID } from './switch-theme/constants';\nimport buildScheme from './scheme/build';\nimport buildSwitch from './switch-theme/build';\n\nnew api.core.Initializer(`:root[${SCHEME_ATTR}]`, [buildScheme]);\nnew api.core.Initializer(`${SWITCH_THEME_ID}`, [buildSwitch]);\n","/* eslint-disable no-new */\nimport { Scheme } from './scheme';\n\nconst build = () => {\n  new Scheme();\n};\n\nexport default build;\n","/* eslint-disable no-new */\nimport { SwitchTheme } from './switch-theme';\n\nconst build = () => {\n  new SwitchTheme();\n};\n\nexport default build;\n","import api from '../../api.js';\n\nexport const SIDEMENU_CLASS = api.core.ns('sidemenu');\nexport const SIDEMENU_LIST_CLASS = api.core.ns('sidemenu__list');\n","/* eslint-disable no-new */\nimport api from '../api.js';\nimport { SIDEMENU_CLASS, SIDEMENU_LIST_CLASS } from './sidemenu/constants';\n\napi.Collapse.register(SIDEMENU_CLASS, SIDEMENU_LIST_CLASS);\n","import api from '../../api.js';\n\nexport const TABLE_SELECTOR = api.core.ns.selector('table');\n// export const TABLE_CLASS = api.core.ns('table');\nexport const TABLE_SCROLLING_SELECTOR = `${api.core.ns.selector('table')}:not(${api.core.ns.selector('table--no-scroll')})`;\nexport const LEFT = 'left';\nexport const RIGHT = 'right';\nexport const SHADOW_CLASS = api.core.ns('table--shadow');\nexport const SHADOW_LEFT_CLASS = api.core.ns('table--shadow-left');\nexport const SHADOW_RIGHT_CLASS = api.core.ns('table--shadow-right');\nexport const WRAPPER_CLASS = api.core.ns('table__wrapper');\nexport const CAPTION_BOTTOM_CLASS = api.core.ns('table--caption-bottom');\nexport const SCROLL_OFFSET = 1; // valeur en px du scroll avant laquelle le shadow s'active ou se desactive\n","import api from '../../api.js';\nimport {\n  SHADOW_CLASS,\n  SHADOW_LEFT_CLASS,\n  SHADOW_RIGHT_CLASS,\n  WRAPPER_CLASS,\n  LEFT,\n  RIGHT,\n  CAPTION_BOTTOM_CLASS, SCROLL_OFFSET\n} from './constants.js';\n\nclass Table {\n  constructor (table) {\n    this.init(table);\n  }\n\n  init (table) {\n    this.table = table;\n    this.tableElem = this.table.querySelector('table');\n    this.tableContent = this.tableElem.querySelector('tbody');\n    this.isScrollable = this.tableContent.offsetWidth > this.tableElem.offsetWidth;\n    this.caption = this.tableElem.querySelector('caption');\n    this.captionHeight = 0;\n    this.wrap();\n\n    const scrolling = this.change.bind(this);\n    this.tableElem.addEventListener('scroll', scrolling);\n    this.change();\n  }\n\n  change () {\n    const newScroll = this.tableContent.offsetWidth > this.tableElem.offsetWidth;\n    let firstTimeScrollable = this.tableElem.offsetWidth > this.table.offsetWidth;\n    if (newScroll || firstTimeScrollable) {\n      this.scroll();\n      this.handleCaption();\n    } else {\n      if (newScroll !== this.isScrollable) this.delete();\n    }\n    this.isScrollable = newScroll;\n    firstTimeScrollable = false;\n  }\n\n  delete () {\n    api.core.removeClass(this.table, SHADOW_RIGHT_CLASS);\n    api.core.removeClass(this.table, SHADOW_LEFT_CLASS);\n    api.core.removeClass(this.table, SHADOW_CLASS);\n    if (this.caption) {\n      this.tableElem.style.marginTop = '';\n      this.caption.style.top = '';\n      this.tableElem.style.marginBottom = '';\n      this.caption.style.bottom = '';\n    }\n  }\n\n  scroll () {\n    api.core.addClass(this.table, SHADOW_CLASS);\n    this.setShadowPosition();\n  }\n\n  /* ajoute un wrapper autour du tableau */\n  wrap () {\n    const wrapperHtml = document.createElement('div');\n    wrapperHtml.className = WRAPPER_CLASS;\n    this.table.insertBefore(wrapperHtml, this.tableElem);\n    wrapperHtml.appendChild(this.tableElem);\n    this.tableInnerWrapper = wrapperHtml;\n  }\n\n  /* affiche les blocs shadow en fonction de la position du scroll, en ajoutant la classe visible */\n  setShadowPosition () {\n    const tableScrollLeft = this.getScrollPosition(LEFT);\n    const tableScrollRight = this.getScrollPosition(RIGHT);\n\n    // on inverse en cas de lecture droite - gauche\n    if (document.documentElement.getAttribute('dir') === 'rtl') {\n      this.setShadowVisibility(RIGHT, tableScrollLeft);\n      this.setShadowVisibility(LEFT, tableScrollRight);\n    } else {\n      this.setShadowVisibility(LEFT, tableScrollLeft);\n      this.setShadowVisibility(RIGHT, tableScrollRight);\n    }\n  }\n\n  /* Donne le nombre de pixels scrollÃ©s honrizontalement dans un element scrollable */\n  getScrollPosition (side) {\n    let inverter = 1;\n    // on inverse en cas de lecture droite - gauche pour que la valeur de scroll soit toujours positive\n    if (document.documentElement.getAttribute('dir') === 'rtl') {\n      inverter = -1;\n    }\n    switch (side) {\n      case LEFT:\n        return this.tableElem.scrollLeft * inverter;\n      case RIGHT:\n        return this.tableContent.offsetWidth - this.tableElem.offsetWidth - this.tableElem.scrollLeft * inverter;\n      default:\n        return false;\n    }\n  }\n\n  /* positionne la caption en top nÃ©gatif et ajoute un margin-top au wrapper */\n  handleCaption () {\n    if (this.caption) {\n      const style = getComputedStyle(this.caption);\n      const newHeight = this.caption.offsetHeight + parseInt(style.marginTop) + parseInt(style.marginBottom);\n      this.captionHeight = newHeight;\n      if (this.table.classList.contains(CAPTION_BOTTOM_CLASS)) {\n        this.tableElem.style.marginBottom = this.captionHeight + 'px';\n        this.caption.style.bottom = -this.captionHeight + 'px';\n      } else {\n        this.tableElem.style.marginTop = this.captionHeight + 'px';\n        this.caption.style.top = -this.captionHeight + 'px';\n      }\n    }\n  }\n\n  /* ajoute la classe fr-table--shadow-right ou fr-table--shadow-right sur fr-table\n   en fonction d'une valeur de scroll et du sens (right, left) */\n  setShadowVisibility (side, scrollPosition) {\n    // si on a pas scroll, ou qu'on scroll jusqu'au bout\n    if (scrollPosition <= SCROLL_OFFSET) {\n      if (side === LEFT) api.core.removeClass(this.table, SHADOW_LEFT_CLASS);\n      else if (side === RIGHT) api.core.removeClass(this.table, SHADOW_RIGHT_CLASS);\n    } else {\n      if (side === LEFT) api.core.addClass(this.table, SHADOW_LEFT_CLASS);\n      else if (side === RIGHT) api.core.addClass(this.table, SHADOW_RIGHT_CLASS);\n    }\n  }\n}\n\nexport { Table };\n","import api from './api.js';\nimport { Table } from './scripts/table/table.js';\n\napi.Table = Table;\n","import { TABLE_SCROLLING_SELECTOR } from './constants';\nimport { Table } from './table';\n\nconst tables = [];\n\nconst change = () => {\n  for (let i = 0; i < tables.length; i++) tables[i].change();\n};\n\nconst build = () => {\n  const tableNodes = document.querySelectorAll(TABLE_SCROLLING_SELECTOR);\n  for (let i = 0; i < tableNodes.length; i++) tables.push(new Table(tableNodes[i]));\n\n  window.addEventListener('resize', change);\n  window.addEventListener('orientationchange', change);\n  change();\n};\n\nexport { build };\n","/* eslint-disable no-new */\nimport api from '../api.js';\nimport { build } from './table/build.js';\nimport { TABLE_SELECTOR } from './table/constants';\n\nnew api.core.Initializer(TABLE_SELECTOR, [build]);\n","import api from '../../api';\n\n/**\n  * TabButton correspond au bouton cliquable qui change le panel\n  * TabButton Ã©tend de DisclosureButton qui ajoute/enelve l'attribut aria-selected,\n  * Et change l'attributte tabindex a 0 si le boutton est actif (value=true), -1 s'il n'est pas actif (value=false)\n */\nclass TabButton extends api.core.DisclosureButton {\n  apply (value) {\n    super.apply(value);\n    if (this.hasAttribute) {\n      this.element.setAttribute('tabindex', value ? '0' : '-1');\n    }\n  }\n}\n\nexport { TabButton };\n","import api from '../../api.js';\n\nexport const TABS_SELECTOR = api.core.ns.selector('tabs');\nexport const TABS_CLASS = api.core.ns('tabs');\nexport const TAB_CLASS = api.core.ns('tabs__tab');\nexport const PANEL_CLASS = api.core.ns('tabs__panel');\nexport const LIST_CLASS = api.core.ns('tabs__list');\n\nexport const TRANSITION_TIME = 100;\n","import api from '../../api.js';\nimport { LIST_CLASS, TAB_CLASS, TABS_CLASS } from './constants';\n\n/**\n* TabGroup est la classe Ã©tendue de DiscosuresGroup\n* Correspond Ã  un objet Tabs avec plusieurs tab-button & Tab (panel)\n*/\nclass TabsGroup extends api.core.DisclosuresGroup {\n  constructor (id, element) {\n    super(id, element);\n    this.list = element.querySelector(`.${LIST_CLASS}`);\n\n    element.addEventListener('transitionend', this.transitionend.bind(this));\n\n    this.init();\n    api.core.engine.renderer.add(this.render.bind(this));\n  }\n\n  static get selector () { return TABS_CLASS; }\n\n  transitionend (e) {\n    this.element.style.transition = 'none';\n  }\n\n  init () {\n    this.keyListener = new api.KeyListener(this.element);\n    this.keyListener.down(api.KeyListener.RIGHT, this.arrowRightPress.bind(this), true, true);\n    this.keyListener.down(api.KeyListener.LEFT, this.arrowLeftPress.bind(this), true, true);\n    this.keyListener.down(api.KeyListener.HOME, this.homePress.bind(this), true, true);\n    this.keyListener.down(api.KeyListener.END, this.endPress.bind(this), true, true);\n  }\n\n  /**\n   * Selectionne l'element suivant de la liste si on est sur un bouton\n   * Si on est Ã  la fin on retourne au dÃ©but\n   */\n  arrowRightPress () {\n    if (document.activeElement.classList.contains(TAB_CLASS)) {\n      if (this.index < this.length - 1) {\n        this.index++;\n      } else {\n        this.index = 0;\n      }\n\n      this.focus();\n    }\n  };\n\n  /**\n   * Selectionne l'element prÃ©cÃ©dent de la liste si on est sur un bouton\n   * Si on est au debut retourne a la fin\n   */\n  arrowLeftPress () {\n    if (document.activeElement.classList.contains(TAB_CLASS)) {\n      if (this.index > 0) {\n        this.index--;\n      } else {\n        this.index = this.length - 1;\n      }\n\n      this.focus();\n    }\n  };\n\n  /**\n   * Selectionne le permier element de la liste si on est sur un bouton\n   */\n  homePress () {\n    if (document.activeElement.classList.contains(TAB_CLASS)) {\n      this.index = 0;\n      this.focus();\n    }\n  };\n\n  /**\n   * Selectionne le dernier element de la liste si on est sur un bouton\n   */\n  endPress () {\n    if (document.activeElement.classList.contains(TAB_CLASS)) {\n      this.index = this.length - 1;\n      this.focus();\n    }\n  };\n\n  focus () {\n    if (this.current) this.current.focus();\n  }\n\n  apply () {\n    for (let i = 0; i < this._index; i++) this.members[i].translate(-1);\n    this.current.element.style.transform = '';\n    for (let i = this._index + 1; i < this.length; i++) this.members[i].translate(1);\n    this.element.style.transition = '';\n  }\n\n  add (tab) {\n    super.add(tab);\n    if (this.length === 1 || tab.disclosed) this.current = tab;\n    else {\n      const index = this.members.indexOf(tab);\n      if (this._index > -1 && this._index !== index) tab.translate(index < this._index ? -1 : 1, true);\n    }\n  }\n\n  render () {\n    if (this.current === null) return;\n    const paneHeight = Math.round(this.current.element.offsetHeight);\n    if (this.panelHeight === paneHeight) return;\n    this.panelHeight = paneHeight;\n    this.element.style.height = (this.panelHeight + this.list.offsetHeight) + 'px';\n  }\n}\n\nexport { TabsGroup };\n","import api from '../../api.js';\nimport { TabButton } from './tab-button.js';\nimport { PANEL_CLASS } from './constants.js';\nimport { TabsGroup } from './tabs-group.js';\n\n/**\n  * Tab coorespond au panel d'un Ã©lement Tabs (tab panel)\n  * Tab Ã©tend disclosure qui ajoute/enleve le modifier --selected,\n  * et ajoute/eleve l'attribut hidden, sur le panel\n  */\nclass Tab extends api.core.Disclosure {\n  static get type () { return api.core.DISCLOSURE_TYPES.select; }\n  static get selector () { return PANEL_CLASS; }\n\n  get GroupConstructor () { return TabsGroup; }\n\n  buttonFactory (element) {\n    return new TabButton(element, this);\n  }\n\n  translate (direction, initial) {\n    if (initial) this.element.style.transition = 'none';\n    this.element.style.transform = `translate(${direction * 100}%)`;\n    if (initial) this.element.style.transition = '';\n  }\n\n  reset () {\n    this.group.index = 0;\n  }\n}\n\nexport { Tab };\n","import api from './api.js';\nimport { Tab } from './scripts/tabs/tab.js';\nimport { TabButton } from './scripts/tabs/tab-button.js';\nimport { TabsGroup } from './scripts/tabs/tabs-group';\n\napi.Tab = Tab;\napi.TabButton = TabButton;\napi.TabsGroup = TabsGroup;\n","/* eslint-disable no-new */\nimport api from '../api.js';\nimport { build } from './tabs/build.js';\nimport { TABS_SELECTOR } from './tabs/constants.js';\n\nnew api.core.Initializer(TABS_SELECTOR, [build]);\n","import { Tab } from './tab';\n\n/**\n* Initialise tout les Ã©lÃ©ments Tab dans la page\n*/\nconst build = () => {\n  Tab.build(document);\n};\n\nexport { build };\n","import api from '../../api.js';\n\nexport const HEADER_SELECTOR = api.core.ns.selector('header');\nexport const HEADER_SEARCH_SELECTOR = api.core.ns.selector('header__search');\nexport const HEADER_MENU_SELECTOR = api.core.ns.selector('header__menu');\nexport const HEADER_TOOLS_LINKS_SELECTOR = api.core.ns.selector('header__tools-links');\nexport const HEADER_MENU_LINKS_SELECTOR = api.core.ns.selector('header__menu-links');\nexport const HEADER_LINKS_GROUP_SELECTOR = `${HEADER_TOOLS_LINKS_SELECTOR} ${api.core.ns.selector('links-group')}`;\n","import api from '../../api.js';\nimport {\n  HEADER_MENU_SELECTOR,\n  HEADER_SEARCH_SELECTOR,\n  HEADER_SELECTOR,\n  HEADER_LINKS_GROUP_SELECTOR,\n  HEADER_TOOLS_LINKS_SELECTOR,\n  HEADER_MENU_LINKS_SELECTOR\n} from './constants';\n\nclass Header {\n  constructor (header) {\n    this.header = header || document.querySelector(HEADER_SELECTOR);\n    this.modals = [];\n\n    this.init();\n  }\n\n  getModal (selector) {\n    const element = this.header.querySelector(selector);\n    if (!element) return;\n    const modals = api.core.Instance.getInstances(element, api.Modal);\n    if (!modals || !modals.length) return;\n    this.modals.push(modals[0]);\n  }\n\n  init () {\n    this.getModal(HEADER_SEARCH_SELECTOR);\n    this.getModal(HEADER_MENU_SELECTOR);\n\n    this.linksGroup = this.header.querySelector(HEADER_LINKS_GROUP_SELECTOR);\n\n    this.toolsLinks = this.header.querySelector(HEADER_TOOLS_LINKS_SELECTOR);\n    this.menuLinks = this.header.querySelector(HEADER_MENU_LINKS_SELECTOR);\n\n    this.changing = this.change.bind(this);\n\n    window.addEventListener('resize', this.changing);\n    this.change();\n  }\n\n  change () {\n    this.isLarge = window.matchMedia('(min-width: 62em)').matches;\n\n    if (this.isLarge) {\n      for (let i = 0; i < this.modals.length; i++) {\n        this.modals[i].conceal();\n        this.modals[i].element.removeAttribute('role');\n      }\n    } else {\n      for (let i = 0; i < this.modals.length; i++) {\n        this.modals[i].element.setAttribute('role', 'dialog');\n      }\n    }\n\n    if (this.linksGroup !== null) {\n      if (this.isLarge) this.toolsLinks.appendChild(this.linksGroup);\n      else this.menuLinks.appendChild(this.linksGroup);\n    }\n  }\n}\n\nexport { Header };\n","import api from './api.js';\nimport { Header } from './scripts/header/header';\n\napi.Header = Header;\n","/* eslint-disable no-new */\nimport api from '../api.js';\nimport { HEADER_SELECTOR } from './header/constants.js';\nimport { build } from './header/build.js';\n\nnew api.core.Initializer(HEADER_SELECTOR, [build]);\n","import { Header } from './header.js';\nimport { HEADER_SELECTOR } from './constants';\n\nconst build = () => {\n  const elements = Array.prototype.slice.call(document.querySelectorAll(HEADER_SELECTOR));\n\n  const headers = [];\n\n  for (const element of elements) headers.push(new Header(element));\n};\n\nexport { build };\n"],"names":["api","window","core","ns","name","selector","notation","undefined","attr","quoted","value","result","event","type","modifiyClass","element","className","remove","charAt","substr","classNames","split","index","indexOf","splice","push","join","addClass","removeClass","Renderer","[object Object]","this","closures","nexts","rendering","render","bind","closure","frame","requestAnimationFrame","call","shift","engine","renderer","factory","Initializer","builders","instances","document","readyState","start","addEventListener","length","querySelectorAll","i","elements","count","getElementId","id","Instance","isResizing","isRendering","_isRendering","_isResizing","listeners","data","CustomEvent","dispatchEvent","removeEventListener","unlisten","instanceClass","filter","instance","GROUP_ATTR","groups","DisclosuresGroup","members","_index","_current","group","constructor","member","groupConstructor","getAttribute","getGroupById","add","GroupConstructor","groupSelector","parentElement","classList","contains","getGroupByElement","setGroup","current","disclosed","primal","conceal","disclose","apply","hasFocus","DisclosureButton","disclosure","hasAttribute","attributeName","click","observer","MutationObserver","mutate","observe","attributes","e","change","mutations","forEach","mutation","disconnect","setAttribute","activeElement","DISCLOSE_EVENT","CONCEAL_EVENT","disclosures","Disclosure","super","buttons","_selector","modifier","ariaState","pristine","ariaControls","addButton","gather","groupById","groupByParent","from","Array","prototype","slice","button","buttonFactory","withhold","preventFocus","focus","reset","_disclosed","dispatch","canConceal","buttonHasFocus","some","DISCLOSURE_TYPES","expand","select","opened","KeyListener","collections","action","KeyActionCollection","key","preventDefault","stopPropagation","_add","KeyAction","collection","dispose","types","actions","binding","handle","keyCode","TAB","ESCAPE","END","HOME","LEFT","UP","RIGHT","DOWN","COLLAPSE_CLASS","collapses","ascendants","Collapse","requesting","request","transitionend","unbound","ascendant","gatherByAscendants","collapse","style","maxHeight","adjust","requested","setProperty","height","offsetHeight","Equisized","maxWidth","changing","tmpWWidth","_getWidth","width","el","offsetWidth","getComputedStyle","parseInt","marginLeft","marginRight","build","ACCORDIONS_GROUP","ACCORDION_ASCENDANT","AccordionsGroup","register","BREADCRUMB_COLLAPSE_SELECTOR","Breadcrumb","getInstances","links","listen","resizing","resize","next","verify","matchMedia","matches","breadcrumbs","breadcrumbNodes","BUTTON_SELECTOR","BUTTONS_GROUP_SELECTOR","EQUISIZED_BUTTONS_GROUP_SELECTOR","arrayEquisized","MODAL_SELECTOR","MODAL_CLASS","NO_SCROLL_CLASS","SCROLL_SHADOW_CLASS","MODAL_BODY_SELECTOR","UNORDEREDS","ORDEREDS","isFocusable","container","visibility","display","FocusTrap","onTrap","onUntrap","waiting","wait","handling","trapped","untrap","isTrapping","trapping","focusables","stunneds","node","child","children","stun","Stunned","first","last","shiftKey","tabIndex","unordereds","radios","documentElement","radio","RadioButtonGroup","unordered","tagName","toLowerCase","keep","ordereds","sort","a","b","noDuplicates","concat","removeAttribute","hidden","inert","checked","selected","ModalsGroup","trap","initial","Modal","body","querySelector","scrollDistance","scrolling","init","keyListener","down","target","handleScroll","isScrollable","top","scroll","scrollY","scrollHeight","clientHeight","scrollTop","innerHeight","NAVIGATION_CLASS","NAVIGATION_LIST_CLASS","NAVIGATION_ITEM_CLASS","NAVIGATION_ITEM_RIGHT_CLASS","NAVIGATION_MENU_CLASS","Navigation","menus","navList","focusOut","NavigationMenu","getBoundingClientRect","right","menu","place","initialize","item","styles","parseFloat","left","SCHEME_ATTR","TRANSITION_ATTR","Scheme","root","scheme","localStorage","getItem","setItem","setTimeout","RADIOS_THEME_NAME","SWITCH_THEME_ID","THEME_ATTR","SwitchTheme","theme","isApplying","SIDEMENU_CLASS","SIDEMENU_LIST_CLASS","TABLE_SELECTOR","TABLE_SCROLLING_SELECTOR","SHADOW_CLASS","SHADOW_LEFT_CLASS","SHADOW_RIGHT_CLASS","WRAPPER_CLASS","CAPTION_BOTTOM_CLASS","Table","table","tableElem","tableContent","caption","captionHeight","wrap","newScroll","firstTimeScrollable","handleCaption","delete","marginTop","marginBottom","bottom","setShadowPosition","wrapperHtml","createElement","insertBefore","appendChild","tableInnerWrapper","tableScrollLeft","getScrollPosition","tableScrollRight","setShadowVisibility","side","inverter","scrollLeft","newHeight","scrollPosition","tables","tableNodes","TabButton","TABS_SELECTOR","TABS_CLASS","TAB_CLASS","PANEL_CLASS","LIST_CLASS","TabsGroup","list","transition","arrowRightPress","arrowLeftPress","homePress","endPress","translate","transform","tab","paneHeight","Math","round","panelHeight","Tab","direction","HEADER_SELECTOR","HEADER_SEARCH_SELECTOR","HEADER_MENU_SELECTOR","HEADER_TOOLS_LINKS_SELECTOR","HEADER_MENU_LINKS_SELECTOR","HEADER_LINKS_GROUP_SELECTOR","Header","header","modals","getModal","linksGroup","toolsLinks","menuLinks","isLarge","headers"],"mappings":"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"}