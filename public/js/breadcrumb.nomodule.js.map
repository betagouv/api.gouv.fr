{"version":3,"file":"breadcrumb.nomodule.js","sources":["../../src/core/generated/scripts/config.js","../../src/core/api.js","../../src/breadcrumb/scripts/breadcrumb/constants.js","../../src/breadcrumb/scripts/breadcrumb/breadcrumb.js","../../src/breadcrumb/scripts/breadcrumb/build.js","../../src/breadcrumb/scripts/module.js"],"sourcesContent":["export const prefix = 'fr';\r\nexport const namespace = 'dsfr';\r\nexport const organisation = '@gouvfr';\r\n","import { namespace } from './generated/scripts/config.js';\n\nconst api = window[namespace] || { core: {} };\nwindow[namespace] = api;\nexport default api;\n","import api from '../../api.js';\n\nexport const BREADCRUMB_COLLAPSE_SELECTOR = `${api.core.ns.selector('breadcrumb')} ${api.core.ns.selector('collapse')}`;\n","import api from '../../api.js';\n\nclass Breadcrumb extends api.core.Instance {\n  constructor (element) {\n    super(element);\n    this.collapse = api.core.Instance.getInstances(element, api.Collapse)[0];\n    this.links = [...this.element.querySelectorAll('a[href]')];\n    this.count = 0;\n    if (this.links.length) {\n      this.listen(api.core.Disclosure.DISCLOSE_EVENT, this.focus.bind(this));\n      // TODO: refactor avec instance\n      this.resizing = this.resize.bind(this);\n      window.addEventListener('resize', this.resizing);\n    }\n  }\n\n  focus () {\n    this.links[0].focus();\n    api.core.engine.renderer.next(() => { this.verify(); });\n  }\n\n  verify () {\n    this.count++;\n    if (this.count > 100) return;\n    if (document.activeElement !== this.links[0]) this.focus();\n  }\n\n  resize () {\n    if (window.matchMedia('(min-width: 48em)').matches) {\n      if (this.collapse.buttons[0] === document.activeElement) this.links.focus();\n    } else {\n      if (this.links.indexOf(document.activeElement) > -1) this.collapse.focus();\n    }\n  }\n}\n\nexport { Breadcrumb };\n","import { BREADCRUMB_COLLAPSE_SELECTOR } from './constants';\nimport { Breadcrumb } from './breadcrumb';\n\nconst build = () => {\n  const breadcrumbs = [];\n  const breadcrumbNodes = document.querySelectorAll(BREADCRUMB_COLLAPSE_SELECTOR);\n  for (let i = 0; i < breadcrumbNodes.length; i++) breadcrumbs.push(new Breadcrumb(breadcrumbNodes[i]));\n};\n\nexport default build;\n","/* eslint-disable no-new */\nimport api from '../api.js';\nimport build from './breadcrumb/build.js';\nimport { BREADCRUMB_COLLAPSE_SELECTOR } from './breadcrumb/constants';\n\nnew api.core.Initializer(BREADCRUMB_COLLAPSE_SELECTOR, [build]);\n"],"names":["const","super","this","let"],"mappings":"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"}