/*! DSFR v1.0.0-rc1.0 | restricted use */
!function(){"use strict";var t=window.dsfr||{core:{}};window.dsfr=t;var e=t.core.ns.selector("modal"),n=t.core.ns("modal"),i=t.core.ns("no-scroll"),o=t.core.ns("scroll-shadow"),r=t.core.ns.selector("modal__body"),s=['[tabindex="0"]',"a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false" i])',"details>summary:first-of-type","details"].join(),l=['[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'].join(),c=function(t,e){if("hidden"===window.getComputedStyle(t).visibility)return!1;for(void 0===e&&(e=t);e.contains(t);){if("none"===window.getComputedStyle(t).display)return!1;t=t.parentElement}return!0},a=function(t,e){this.element=null,this.activeElement=null,this.onTrap=t,this.onUntrap=e,this.waiting=this.wait.bind(this),this.handling=this.handle.bind(this),this.current=null},h={trapped:{configurable:!0},focusables:{configurable:!0}};h.trapped.get=function(){return null!==this.element},a.prototype.trap=function(t){this.trapped&&this.untrap(),this.element=t,this.isTrapping=!0,this.wait(),this.onTrap&&this.onTrap()},a.prototype.wait=function(){c(this.element)?this.trapping():t.core.engine.renderer.next(this.waiting)},a.prototype.trapping=function(){if(this.isTrapping){this.isTrapping=!1;var t=this.focusables;t.length&&t[0].focus(),this.element.setAttribute("aria-modal",!0),this.element.addEventListener("keydown",this.handling),this.stunneds=[]}},a.prototype.stun=function(t){for(var e=0,n=t.children;e<n.length;e+=1){var i=n[e];i!==this.element&&(i.contains(this.element)?this.stun(i):this.stunneds.push(new d(i)))}},a.prototype.handle=function(t){if(9===t.keyCode){var e=this.focusables;if(0!==e.length){var n=e[0],i=e[e.length-1],o=e.indexOf(document.activeElement);t.shiftKey?!this.element.contains(document.activeElement)||o<1?(t.preventDefault(),i.focus()):(document.activeElement.tabIndex>0||e[o-1].tabIndex>0)&&(t.preventDefault(),e[o-1].focus()):this.element.contains(document.activeElement)&&o!==e.length-1&&-1!==o?document.activeElement.tabIndex>0&&(t.preventDefault(),e[o+1].focus()):(t.preventDefault(),n.focus())}}},h.focusables.get=function(){var t=this,e=[].concat(this.element.querySelectorAll(s)),n=[].concat(document.documentElement.querySelectorAll('input[type="radio"]'));if(n.length){for(var i={},o=0,r=n;o<r.length;o+=1){var a=r[o],h=a.getAttribute("name");void 0===i[h]&&(i[h]=new u(h)),i[h].push(a)}e=e.filter((function(t){if("input"!==t.tagName.toLowerCase()||"radio"!==t.getAttribute("type").toLowerCase())return!0;var e=t.getAttribute("name");return i[e].keep(t)}))}var d=[].concat(this.element.querySelectorAll(l));d.sort((function(t,e){return t.tabIndex-e.tabIndex}));var p=e.filter((function(t){return-1===d.indexOf(t)}));return d.concat(p).filter((function(e){return"-1"!==e.tabIndex&&c(e,t.element)}))},a.prototype.untrap=function(){this.trapped&&(this.isTrapping=!1,this.element.removeAttribute("aria-modal"),this.element.removeEventListener("keydown",this.handling),this.element=null,this.onUntrap&&this.onUntrap())},Object.defineProperties(a.prototype,h);var d=function(t){this.element=t,this.hidden=t.getAttribute("aria-hidden"),this.inert=t.getAttribute("inert"),this.element.setAttribute("aria-hidden",!0),this.element.setAttribute("inert","")};d.prototype.unstun=function(){null===this.hidden?this.element.removeAttribute("aria-hidden"):this.element.setAttribute("aria-hidden",this.hidden),null===this.inert?this.element.removeAttribute("inert"):this.element.setAttribute("inert",this.inert)};var u=function(t){this.name=t,this.buttons=[]};u.prototype.push=function(t){this.buttons.push(t),(t===document.activeElement||t.checked||void 0===this.selected)&&(this.selected=t)},u.prototype.keep=function(t){return this.selected===t};var p=function(t){function e(){t.call(this),this.trap=new a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(e,n){t.prototype.apply.call(this,e,n),null===this.current?this.trap.untrap():this.trap.trap(this.current.element)},e}(t.core.DisclosuresGroup),f=new p,m=function(e){function s(t){e.call(this,t),this.body=this.element.querySelector(r),this.scrollDistance=0,this.scrolling=this.resize.bind(this,!1),this.resizing=this.resize.bind(this,!0),this.init(),this.resize(!0)}e&&(s.__proto__=e),s.prototype=Object.create(e&&e.prototype),s.prototype.constructor=s;var l={GroupConstructor:{configurable:!0}},c={type:{configurable:!0},selector:{configurable:!0}};return s.prototype.init=function(){this.element.addEventListener("click",this.click.bind(this)),this.keyListener=new t.KeyListener(this.element),this.keyListener.down(t.KeyListener.ESCAPE,this.conceal.bind(this),!0,!0),this.body&&(this.body.addEventListener("scroll",this.scrolling),window.addEventListener("resize",this.resizing))},s.prototype.click=function(t){this.body&&this.body!==t.target&&!this.body.contains(t.target)&&this.conceal()},s.prototype.gather=function(){f.add(this)},s.prototype.disclose=function(t){return!!e.prototype.disclose.call(this,t)&&(this.resize(!0),this.handleScroll(!1),!0)},s.prototype.conceal=function(t,n){return!!e.prototype.conceal.call(this,t,n)&&(this.handleScroll(!0),!0)},s.prototype.handleScroll=function(e){e?(t.core.removeClass(document.documentElement,i),document.body.style.top="",window.scroll(0,this.scrollDistance)):(document.documentElement.classList.contains(i)||(this.scrollDistance=window.scrollY),document.body.style.top=-1*this.scrollDistance+"px",t.core.addClass(document.documentElement,i))},s.prototype.resize=function(e,n){var i=this;this.body&&(this.body.scrollHeight>this.body.clientHeight?this.body.offsetHeight+this.body.scrollTop>=this.body.scrollHeight?t.core.removeClass(this.body,o):t.core.addClass(this.body,o):t.core.removeClass(this.body,o),e&&(this.body.style.maxHeight=window.innerHeight-32+"px",t.core.engine.renderer.next((function(){i.body.style.maxHeight=window.innerHeight-32+"px"}))))},c.type.get=function(){return t.core.DISCLOSURE_TYPES.opened},c.selector.get=function(){return n},l.GroupConstructor.get=function(){return p},Object.defineProperties(s.prototype,l),Object.defineProperties(s,c),s}(t.core.Disclosure);t.Modal=m,t.ModalsGroup=p,t.FocusTrap=a;new t.core.Initializer(e,[function(){m.build(document)}])}();
//# sourceMappingURL=modal.nomodule.min.js.map
